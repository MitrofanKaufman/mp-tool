# Admin Dashboard

Административная панель для управления сервисами с веб-интерфейсом.

## Содержание

1. [Установка и запуск](#установка-и-запуск)
2. [Структура проекта](#структура-проекта)
3. [Серверная часть](#серверная-часть)
   - [Основные функции](#основные-функции)
   - [API эндпоинты](#api-эндпоинты)
   - [WebSocket](#websocket)
4. [Клиентская часть](#клиентская-часть)
   - [Основные компоненты](#основные-компоненты)
   - [Взаимодействие с API](#взаимодействие-с-api)
5. [Разработка](#разработка)
   - [Требования](#требования)
   - [Сборка и тестирование](#сборка-и-тестирование)

## Установка и запуск

1. Установите зависимости:
```bash
npm install
```

2. Запустите сервер:
```bash
node server.js
```

3. Откройте в браузере:
```
http://localhost:3000
```

## Структура проекта

```
.
├── server.js               # Основной файл сервера
├── public/                 # Статические файлы
│   └── js/                 # JavaScript файлы
│       ├── app.js          # Точка входа приложения
│       ├── dashboard-core.js # Основная логика дашборда
│       └── modules/        # Модули приложения
│           ├── api-client.js # Клиент для работы с API
│           └── router.js   # Маршрутизатор
```

## Серверная часть

### Основные функции

- `serveStaticFile(res, filePath, contentType)` - Отправка статических файлов
- `setCorsHeaders(res)` - Установка CORS заголовков
- `handleOptions(req, res)` - Обработка CORS preflight запросов
- `sendJsonResponse(res, statusCode, data)` - Отправка JSON-ответов
- `parseRequestBody(req)` - Парсинг тела запроса

### API эндпоинты

#### Управление сервисами
- `GET /api/services` - Получение списка сервисов
- `POST /api/services/:name/start` - Запуск сервиса
- `POST /api/services/:name/stop` - Остановка сервиса
- `GET /api/services/:name/status` - Статус сервиса

#### Тикеты
- `GET /api/tickets` - Список тикетов
- `GET /api/tickets/categories` - Категории тикетов
- `PUT /api/tickets/categories/:id` - Обновление категории
- `POST /api/tickets/:id/read` - Отметить как прочитанное

#### Идеи
- `GET /api/ideas` - Список идей
- `POST /api/ideas` - Создать идею

### WebSocket

Сервер поддерживает WebSocket соединения по пути `/ws` для обновления данных в реальном времени.

## Клиентская часть

### Основные компоненты

#### AdminDashboard
Основной класс приложения, инициализирует все компоненты и управляет состоянием.

#### ApiClient
Класс для работы с API сервера. Поддерживает:
- Автоматическую обработку ошибок
- Кеширование запросов
- Моки для разработки

#### Router
Маршрутизатор приложения, обрабатывает навигацию между разделами.

### Взаимодействие с API

1. **Авторизация**
   - Запрос на `/api/auth`
   - Сохранение токена
   - Автоматическое обновление токена

2. **Работа с данными**
   - Поддержка CRUD операций
   - Оптимистичные обновления
   - Кеширование на стороне клиента

3. **Обработка ошибок**
   - Показ пользовательских сообщений
   - Автоматические повторные запросы
   - Логирование в консоль

## Разработка

### Требования

- Node.js 16+
- npm 8+

### Сборка и тестирование

```bash
# Установка зависимостей
npm install

# Запуск в режиме разработки
npm run dev

# Сборка для продакшена
npm run build

# Запуск тестов
npm test

# Проверка стиля кода
npm run lint
```

### Рекомендации по разработке

1. Используйте JSDoc для документирования кода
2. Соблюдайте принципы SOLID
3. Пишите модульные тесты
4. Используйте feature flags для новой функциональности
5. Ведите CHANGELOG.md

### Безопасность

- Всегда валидируйте входящие данные
- Используйте параметризованные запросы
- Настройте CORS корректно
- Используйте HTTPS в продакшене
