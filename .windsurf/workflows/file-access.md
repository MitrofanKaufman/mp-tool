---
description: Простое управление доступом к файлам и папкам
auto_execution_mode: 1
---

# Простое управление доступом к файлам

Максимально простой инструмент для открытия/закрытия редактирования файлов и папок.

## Расположение скрипта

Скрипт находится в папке `cgi/` согласно структуре проекта:
```bash
cgi/file-access.sh
```

## Как использовать:

Просто укажите файл или папку:
```bash
./cgi/file-access.sh "путь/к/файлу"
./cgi/file-access.sh "путь/к/папке/"
```

## Что происходит:

1. **Анализ** - скрипт определяет, файл это или папка
2. **Проверка** - смотрит текущие права доступа
3. **Вопрос** - показывает простое сообщение:
   - " Редактирование открыто" → "Вы хотите закрыть редактирование?"
   - " Редактирование закрыто" → "Вы хотите открыть редактирование?"
4. **Действие** - после вашего ответа "y" выполняет переключение

## Для папок:

Если указана папка, то:
- Все файлы внутри папки тоже изменяются (рекурсивно)
- Папка получает права 755 (чтение+запись+выполнение)
- Файлы получают права 644 (чтение+запись)

## Примеры:

### Защитить файл:
```bash
./cgi/file-access.sh ".env"
# Вывод:  Редактирование открыто
#         Вы хотите закрыть редактирование? (y/N): y
# Результат: Файл '.env' защищен от редактирования
```

### Открыть папку для редактирования:
```bash
./cgi/file-access.sh "src/"
# Вывод:  Редактирование закрыто
#         Вы хотите открыть редактирование? (y/N): y
# Результат: Папка 'src/' и все файлы внутри открыты для редактирования
```

### Быстрое переключение:
```bash
# Любые файлы и папки
./cgi/file-access.sh "важный-файл.txt"
./cgi/file-access.sh "components/"
./cgi/file-access.sh "config.json"
```

## Права доступа:

| Состояние | Файлы | Папки | Описание |
|-----------|-------|-------|----------|
| **Закрыто** | 444 (r--r--r--) | 555 (r-xr-xr-x) | Только чтение |
| **Открыто** | 644 (rw-r--r--) | 755 (rwxr-xr-x) | Чтение + запись |

## Логирование:

Все изменения записываются в `access.log`:
```
[2024-01-15 10:30:15] CLOSE_FILE .env: 644 -> 444
[2024-01-15 10:30:20] OPEN_DIR src/: recursive write
```

## Простота использования:

- Нет сложных команд
- Нет множества параметров
- Простые вопросы с ответами
- Автоматическое определение типа
- Рекурсивная обработка папок
- Понятные сообщения об успехе
